{% extends "blood/base.html" %}
{% block title %}Intake - Blood Bank{% endblock %}
{% block content %}
  <div class="row">
    <div class="col-lg-7">
      <div class="card">
        <div class="card-body">
          <h2 class="h4 mb-3">New Donation</h2>

          {% if messages %}
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
          {% endif %}

          <form method="post" novalidate>
            {% csrf_token %}

            <!-- National ID (readonly) -->
            <div class="mb-3">
              <label class="form-label" for="id_national_id">National ID</label>
              <input
                type="text"
                id="id_national_id"
                name="national_id"
                class="form-control"
                value="{{ form.initial.national_id|default:form.national_id.value }}"
                maxlength="9"
                inputmode="numeric"
                pattern="\d{9}"
                readonly>
              <div class="form-text">This value is taken from your profile.</div>
            </div>

            <!-- Full name (readonly) -->
            <div class="mb-3">
              <label class="form-label" for="id_full_name">Full name</label>
              <input
                type="text"
                id="id_full_name"
                name="full_name"
                class="form-control"
                value="{{ form.initial.full_name|default:form.full_name.value }}"
                readonly>
              <div class="form-text">This value is taken from your profile.</div>
            </div>

            <!-- Blood type (display readonly + hidden for submission) -->
            <div class="mb-3">
              <label class="form-label" for="id_blood_type_display">Blood type</label>
              <input
                type="text"
                id="id_blood_type_display"
                class="form-control"
                value="{{ form.initial.blood_type|default:form.blood_type.value }}"
                readonly>
              <input type="hidden" name="blood_type" value="{{ form.initial.blood_type|default:form.blood_type.value }}">
              <div class="form-text">This value is taken from your profile.</div>
            </div>

            <button type="submit" class="btn btn-bb">Save Donation</button>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
